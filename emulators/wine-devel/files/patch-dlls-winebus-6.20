commit 57db53024a79aa5ce3c691d94b5f167a34ef0530
Author: Damjan Jovanovic <damjan.jov@gmail.com>
Date:   Sat Oct 23 10:54:48 2021 +0200

    winebus.sys: get inotify working on FreeBSD
    
    FreeBSD requires linking to the inotify library, and
    including limits.h.
    
    Signed-off-by: Damjan Jovanovic <damjan.jov@gmail.com>

diff --git dlls/winebus.sys/Makefile.in dlls/winebus.sys/Makefile.in
index 6fc6fc5a632..d9ea33d267d 100644
--- dlls/winebus.sys/Makefile.in
+++ dlls/winebus.sys/Makefile.in
@@ -1,7 +1,7 @@
 MODULE    = winebus.sys
 UNIXLIB   = winebus.so
 IMPORTS   = ntoskrnl hidparse
-EXTRALIBS = $(IOKIT_LIBS) $(UDEV_LIBS) $(PTHREAD_LIBS)
+EXTRALIBS = $(IOKIT_LIBS) $(UDEV_LIBS) $(PTHREAD_LIBS) $(INOTIFY_LIBS)
 EXTRAINCL = $(UDEV_CFLAGS) $(SDL2_CFLAGS)
 
 EXTRADLLFLAGS = -Wl,--subsystem,native
diff --git dlls/winebus.sys/bus_udev.c dlls/winebus.sys/bus_udev.c
index 8889b6a3e1f..4c00fe6ad39 100644
--- dlls/winebus.sys/bus_udev.c
+++ dlls/winebus.sys/bus_udev.c
@@ -52,6 +52,7 @@
 #ifdef HAVE_SYS_INOTIFY_H
 # include <sys/inotify.h>
 #endif
+#include <limits.h>
 
 #ifdef HAVE_LINUX_INPUT_H
 # include <linux/input.h>

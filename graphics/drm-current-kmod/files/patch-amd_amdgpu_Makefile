--- amd/amdgpu/Makefile.orig	2022-02-23 13:59:52 UTC
+++ amd/amdgpu/Makefile
@@ -597,45 +597,66 @@ CWARNFLAGS.amdgpu_atpx_handler.c=		-Wno-missing-protot
 CWARNFLAGS.amdgpu_device.c=	-Wno-missing-prototypes
 .endif
 CWARNFLAGS.amdgpu_atpx_handler.c=		-Wno-missing-prototypes
+CWARNFLAGS.amdgpu_bo_list.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.amdgpu_csa.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.amdgpu_device.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.amdgpu_display.c=			-Wno-unused-but-set-variable
 CWARNFLAGS.amdgpu_dma_buf.c=			-Wno-missing-prototypes
+CWARNFLAGS.amdgpu_drv.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.amdgpu_gfx.c=			-Wno-unused-but-set-variable
 CWARNFLAGS.amdgpu_ioc32.c=			-Wno-missing-prototypes
 CWARNFLAGS.amdgpu_pm.c=				-Wno-unused-const-variable
 CWARNFLAGS.amdgpu_ras.c=			-Wno-missing-prototypes -Wno-unused-function
 CWARNFLAGS.amdgpu_sched.c=			-Wno-missing-prototypes
-CWARNFLAGS.amdgpu_ttm.c=			-Wno-missing-prototypes
+CWARNFLAGS.amdgpu_ttm.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.amdgpu_xgmi.c=			-Wno-missing-prototypes
-CWARNFLAGS.gfx_v7_0.c=				-Wno-missing-prototypes
-CWARNFLAGS.gfx_v8_0.c=				-Wno-missing-prototypes
+CWARNFLAGS.atombios_dp.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.atombios_encoders.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.dce_v6_0.c=				-Wno-unused-but-set-variable
+CWARNFLAGS.dce_v8_0.c=				-Wno-unused-but-set-variable
+CWARNFLAGS.gfx_v6_0.c=				-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.gfx_v7_0.c=				-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.gfx_v8_0.c=				-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.gfx_v9_0.c=				-Wno-missing-prototypes
 CWARNFLAGS.gfx_v10_0.c=				-Wno-missing-prototypes
 CWARNFLAGS.gmc_v6_0.c=				-Wno-unused-const-variable
+CWARNFLAGS.kv_dpm.c=				-Wno-unused-but-set-variable
 CWARNFLAGS.mes_v10_1.c=				-Wno-unused-const-variable
 CWARNFLAGS.mmhub_v9_4.c=			-Wno-missing-prototypes
-CWARNFLAGS.vcn_v2_0.c=				-Wno-missing-prototypes
+CWARNFLAGS.sdma_v4_0.c=				-Wno-unused-but-set-variable
+CWARNFLAGS.vcn_v1_0.c=				-Wno-unused-but-set-variable
+CWARNFLAGS.vcn_v2_0.c=				-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.vcn_v2_5.c=				-Wno-unused-but-set-variable
 
 # display/amdgpu_dm
 CWARNFLAGS.amdgpu_dm_pp_smu.c=		-Wno-missing-prototypes -Wno-incompatible-function-pointer-types
 CWARNFLAGS.amdgpu_dm_services.c=	-Wno-missing-prototypes
-CWARNFLAGS.amdgpu_dm.c=			-Wno-missing-prototypes -Wno-unused-function
+CWARNFLAGS.amdgpu_dm.c=			-Wno-missing-prototypes -Wno-unused-function -Wno-unused-but-set-variable
 
 # display/dc
 CWARNFLAGS.conversion.c=		-Wno-missing-prototypes
 CWARNFLAGS.fixpt31_32.c=		-Wno-incompatible-pointer-types
 CWARNFLAGS.vector.c=			-Wno-missing-prototypes
-CWARNFLAGS.bios_parser.c=		-Wno-missing-prototypes
+CWARNFLAGS.bios_parser.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.bios_parser2.c=		-Wno-unused-but-set-variable
+CWARNFLAGS.color_gamma.c=		-Wno-unused-but-set-variable
 CWARNFLAGS.dc_hw_sequencer.c=		-Wno-missing-prototypes
-CWARNFLAGS.dc_link.c=			-Wno-missing-prototypes
+CWARNFLAGS.dc_link.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.dc_link_dp.c=		-Wno-missing-prototypes
-CWARNFLAGS.dce_aux.c=			-Wno-missing-prototypes
+CWARNFLAGS.dce_abm.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.dce_aux.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.dce_clock_source.c=		-Wno-unused-const-variable
 CWARNFLAGS.dce_dmcu.c=			-Wno-missing-prototypes
 CWARNFLAGS.dce_i2c_hw.c=		-Wno-missing-prototypes
 CWARNFLAGS.dce_i2c_sw.c=		-Wno-missing-prototypes
+CWARNFLAGS.dce_link_encoder.c=		-Wno-unused-but-set-variable
+CWARNFLAGS.dce_stream_encoder.c=	-Wno-unused-but-set-variable
 CWARNFLAGS.dce100_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides
 CWARNFLAGS.dce110_compressor.c=		-Wno-missing-prototypes
-CWARNFLAGS.dce110_hw_sequencer.c=	-Wno-missing-prototypes
+CWARNFLAGS.dce110_hw_sequencer.c=	-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.dce110_mem_input_v.c=	-Wno-missing-prototypes
 CWARNFLAGS.dce110_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides
+CWARNFLAGS.dce110_timing_generator.c=	-Wno-unused-but-set-variable
 CWARNFLAGS.dce112_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides
 CWARNFLAGS.dce120_hw_sequencer.c=	-Wno-unused-const-variable
 CWARNFLAGS.dce120_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides
@@ -644,21 +665,25 @@ CWARNFLAGS.rv1_clk_mgr.c=		-Wno-missing-prototypes
 CWARNFLAGS.dce80_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides
 CWARNFLAGS.rv1_clk_mgr_vbios_smu.c=	-Wno-missing-prototypes
 CWARNFLAGS.rv1_clk_mgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.dcn10_dpp.c=			-Wno-missing-prototypes
+CWARNFLAGS.dcn10_dpp.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.dcn10_dpp_dscl.c=		-Wno-missing-prototypes
 CWARNFLAGS.dcn10_hw_sequencer.c=	-Wno-missing-prototypes
+CWARNFLAGS.dcn10_link_encoder.c=	-Wno-unused-but-set-variable
 CWARNFLAGS.dcn10_opp.c=			-Wno-missing-prototypes
 CWARNFLAGS.dcn10_optc.c=		-Wno-missing-prototypes
 CWARNFLAGS.dcn10_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides
-CWARNFLAGS.dcn20_dpp.c=			-Wno-missing-prototypes
-CWARNFLAGS.dcn20_dwb_scl.c=		-Wno-missing-prototypes
+CWARNFLAGS.dcn10_stream_encoder.c=	-Wno-unused-but-set-variable
+CWARNFLAGS.dcn20_dpp.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.dcn20_dwb_scl.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.dcn20_hwseq.c=		-Wno-missing-prototypes
 CWARNFLAGS.dcn20_hubp.c=		-Wno-missing-prototypes
 CWARNFLAGS.dcn20_mpc.c=			-Wno-missing-prototypes
 CWARNFLAGS.dcn20_optc.c=		-Wno-missing-prototypes
 CWARNFLAGS.dcn20_resource.c=		-Wno-missing-prototypes -Wno-initializer-overrides -Wno-unused-variable
-CWARNFLAGS.dcn20_clk_mgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.rc_calc.c=			-Wno-missing-prototypes
+CWARNFLAGS.dcn20_clk_mgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.freesync.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.rc_calc.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.hw_ddc.c=			-Wno-unused-but-set-variable
 CWARNFLAGS.hw_factory.c=		-Wno-missing-prototypes -Wno-unused-function
 CWARNFLAGS.hw_factory_diag.c=		-Wno-missing-prototypes
 CWARNFLAGS.hw_gpio.c=			-Wno-unused-function
@@ -668,21 +693,28 @@ CWARNFLAGS.dc_helper.c=			-Wno-missing-prototypes
 CWARNFLAGS.irq_service_dcn20.c=		-Wno-missing-prototypes
 CWARNFLAGS.power_helpers.c=		-Wno-missing-prototypes
 CWARNFLAGS.dc_helper.c=			-Wno-missing-prototypes
-CWARNFLAGS.dcn_calcs.c+=		-Wno-missing-prototypes -Wno-unused-variable
+CWARNFLAGS.dce_calcs.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.dcn_calcs.c+=		-Wno-missing-prototypes -Wno-unused-variable -Wno-unused-but-set-variable
 
 # powerplay/*
 CWARNFLAGS.amdgpu_smu.c=		-Wno-missing-prototypes
-CWARNFLAGS.ci_smumgr.c=			-Wno-missing-prototypes
+CWARNFLAGS.arcturus_ppt.c=		-Wno-unused-but-set-variable
+CWARNFLAGS.ci_smumgr.c=			-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.fiji_smumgr.c=		-Wno-unused-but-set-variable
 CWARNFLAGS.hardwaremanager.c=		-Wno-missing-prototypes
-CWARNFLAGS.iceland_smumgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.polaris10_smumgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.smu7_hwmgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.smu8_hwmgr.c=		-Wno-missing-prototypes
+CWARNFLAGS.iceland_smumgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.navi10_ppt.c=		-Wno-unused-but-set-variable
+CWARNFLAGS.polaris10_smumgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.pp_psm.c=			-Wno-unused-but-set-variable
+CWARNFLAGS.ppatomctrl.c=		-Wno-unused-but-set-variable
+CWARNFLAGS.smu7_hwmgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.smu8_hwmgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.smu8_smumgr.c=		-Wno-unused-but-set-variable
 CWARNFLAGS.smu9_smumgr.c=		-Wno-missing-prototypes
 CWARNFLAGS.smu10_hwmgr.c=		-Wno-missing-prototypes -Wno-initializer-overrides
 CWARNFLAGS.smu_v11_0.c=			-Wno-missing-prototypes
-CWARNFLAGS.tonga_smumgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.vega10_hwmgr.c=		-Wno-missing-prototypes
+CWARNFLAGS.tonga_smumgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
+CWARNFLAGS.vega10_hwmgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable
 CWARNFLAGS.vega10_powertune.c=		-Wno-unused-const-variable
 CWARNFLAGS.vega10_processpptables.c=	-Wno-missing-prototypes
 CWARNFLAGS.vega10_thermal.c=		-Wno-missing-prototypes
@@ -690,4 +722,5 @@ CWARNFLAGS.vega20_hwmgr.c=		-Wno-missing-prototypes
 CWARNFLAGS.vega12_processpptables.c=	-Wno-missing-prototypes
 CWARNFLAGS.vega12_thermal.c=		-Wno-missing-prototypes
 CWARNFLAGS.vega20_hwmgr.c=		-Wno-missing-prototypes
-CWARNFLAGS.vegam_smumgr.c=		-Wno-missing-prototypes
+CWARNFLAGS.vega20_ppt.c=		-Wno-unused-but-set-variable
+CWARNFLAGS.vegam_smumgr.c=		-Wno-missing-prototypes -Wno-unused-but-set-variable

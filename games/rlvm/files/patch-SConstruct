--- SConstruct.orig	2021-08-10 14:26:06 UTC
+++ SConstruct
@@ -19,8 +19,13 @@ AddOption('--fullstatic', action='store_true',
 
 # Set libraries used by all configurations and all binaries in rlvm.
 env = Environment(
+  ENV=os.environ,
   tools = ["default", "rlvm"],
+  **dict((k, v.split()) for k, v in ARGUMENTS.items())
+)
 
+env.Append(
+
   LIBS = ["z"],
 
   LOCAL_LIBS = [],
@@ -284,7 +289,8 @@ if not config.CheckGuichan():
 
 # Get the configuration from sdl and freetype
 env.ParseConfig("sdl-config --cflags")
-env.ParseConfig("freetype-config --cflags --libs")
+env.ParseConfig("pkg-config freetype2 --cflags --libs")
+config.CheckLibWithHeader('intl', 'libintl.h', "cpp")
 
 env = config.Finish()
 
@@ -313,7 +319,6 @@ if GetOption('release'):
   # Now add release optimizations to the environment
   env.Append(
     CPPFLAGS = [
-      "-Os",
       "-DNDEBUG",
       "-DBOOST_DISABLE_ASSERTS"
     ]
@@ -359,13 +364,7 @@ elif GetOption('pprof'):
              "profiler"]
   )
 else:
-  # Add debugging flags to all binaries here
-  env.Append(
-    CPPFLAGS = [
-      "-g",
-      "-O0"
-    ]
-  )
+  pass
 
 # Cross platform core of rlvm. Produces librlvm.a and libsystem_sdl.a
 env.SConscript("SConscript",
